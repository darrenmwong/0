YUI.add("hermes-template-photo-charms-loading",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;return s+='<div class="',(o=n.className)?o=o.call(t,{hash:{},data:i}):(o=t.className,o=typeof o===a?o.apply(t):o),s+=f(o)+" photo-charm-panel-",(o=n.type)?o=o.call(t,{hash:{},data:i}):(o=t.type,o=typeof o===a?o.apply(t):o),s+=f(o)+' photo-charm-panel loading">\n	',u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t.loadingState,!1,u):l.call(t,"outlet",t.loadingState,!1,u)))+"\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-charms-loading",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-charms-view",function(e){var t="contexts",n="photoChm";e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){return this.currentCharm=this.appContext.getCookie(n)||t,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.appContext.flipper.isFlipped("tags-charm")||delete this.subviewConfig["photo-charm-tags-view"],this},subviewConfig:{"photo-charm-contexts-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["photo-charm-panel","photo-charm-panel-contexts"],disabled:function(){return this.currentCharm!=="contexts"}},"photo-charm-exif-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["photo-charm-panel","photo-charm-panel-exif"],disabled:function(){return this.currentCharm!=="exif"}},"photo-charm-tags-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:["photo-charm-panel","photo-charm-panel-tags"],disabled:function(){return this.currentCharm!=="tags"}}},loadState:function(){return new e.AutoResolvingPromise},buildContainer:function(){var t=[{type:"exif",title:"Info"},{type:"contexts",title:"Also In"}],n,r,i,s,o,u=this;return this.appContext.flipper.isFlipped("tags-charm")&&t.push({type:"tags",title:"Tags"}),o=function(t,n){return u.templates("photo-charms-loading")({className:t,type:n,loadingState:u.templates(e.Balls())()})},r=this.subviews["photo-charm-contexts-view"]?this.subviews["photo-charm-contexts-view"].get("container"):o("photo-charm-contexts-view","contexts"),i=this.subviews["photo-charm-exif-view"]?this.subviews["photo-charm-exif-view"].get("container"):o("photo-charm-exif-view","exif"),s=this.subviews["photo-charm-tags-view"]?this.subviews["photo-charm-tags-view"].get("container"):o("photo-charm-tags-view","tags"),n=this.templates("photo-charms")({buttons:t,initialCharm:this.currentCharm,"photo-charm-contexts-view":r,"photo-charm-exif-view":i,"photo-charm-tags-view":s,showContexts:typeof this.subviews["photo-charm-contexts-view"]!="undefined",showTags:typeof this.subviews["photo-charm-tags-view"]!="undefined",showExif:typeof this.subviews["photo-charm-exif-view"]!="undefined"}),this.setContainerHTML(n),this},activate:function(){var t=this,n=t.get("container"),r,i,s=!0,o;return e.use("transition",function(e){t.charmsButtonClickHandler=t.registerEventHandler(n.on("click",t.handleCharmButtonClick,t))}),this.activateSubviews(),this.activateCharm(this.currentCharm),r=e.OverflowHelper.detectScrollbarSize(n),r>0&&(i=e.one("#content"),e.OverflowHelper.addFlowListener(i,"over",function(){(this.offsetWidth>this.clientWidth||this.offsetHeight>this.clientHeight)&&s&&(t.activateCharm(t.currentCharm),s=!1)},function(e){t.registerEventHandler(e)}),e.OverflowHelper.addFlowListener(i,"under",function(){this.offsetWidth===this.clientWidth&&!s&&(t.activateCharm(t.currentCharm),s=!0)},function(e){t.registerEventHandler(e)})),o=function(n){var r=n?"flickr:photo-page:focus_person_tag_entry":"flickr:photo-page:focus_tag_entry";return function(){t.get("container").one('[data-charm-type="tags"]')&&t.processCharmButtonClicked("tags",function(){setTimeout(function(){e.fire(r)},100)})}},this.attachKeyEvent("down:84",o),e.on("flickr:photo-page-open-add-tag",o(!1)),e.on("flickr:photo-page-open-add-people-tag",o(!0)),this},handleCharmButtonClick:function(e){var t=e.target,n,r;n=t.ancestor(".photo-charm-button",!0);if(!n)return;r=n.getAttribute("data-charm-type");if(!r)return;e.preventDefault(),this.processCharmButtonClicked(r)},processCharmButtonClicked:function(e,t){var n=this,r={exif:"photo-charm-exif-view",tags:"photo-charm-tags-view",contexts:"photo-charm-contexts-view"};this.currentCharm=e,this.subviews[r[this.currentCharm]]?typeof t=="function"&&t():(this.charmsButtonClickHandler.detach(),this.defferedSubviewInstantiation(r[this.currentCharm],this._params).then(function(){typeof t=="function"&&t()})),this.get("container").one(".photo-charm-indicator").addClass("active"),this.activateCharm(e),setTimeout(function(){var e=n.get("container").one(".photo-charm-indicator");e&&e.removeClass("active"),e=null},1e3)},activateCharm:function(e){var t=this.get("container"),r,i,s;i=t.one(".photo-charm-indicator"),r=t.one("[data-charm-type = "+e+"]"),t.all(".photo-charm-panel").setStyle("display","none"),t.one(".photo-charm-panel-"+e)&&t.one(".photo-charm-panel-"+e).setStyle("display","block"),r&&(s=r.get("offsetLeft")+r.get("offsetWidth")/2-i.get("offsetWidth")/2,i.setStyles({left:s+"px",opacity:1})),this.appContext.setCookie({remove:!0,cookieName:n,path:"/photos/",cookieValue:e})}})},"@VERSION@",{requires:["flickr-view","photo-charms-css","hermes-template-photo-charms","overflow-helper","hermes-template-photo-charms-loading","html5-balls"],optional:[]});
YUI.add("hermes-template-group-invitation-notification",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function f(e,t){var r="",i;return r+='\n	<p>\n		<a href="#">\n			<span class="ui-icon-notification">&nbsp;</span> \n			',(i=n.invitationCountString)?i=i.call(e,{hash:{},data:t}):(i=e.invitationCountString,i=typeof i===o?i.apply(e):i),r+=u(i)+"\n		</a>\n	</p>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n["if"].call(t,t.isInvitations,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-invitation-notification",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-group-invitation-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{},attributes:{id:{},photoId:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||undefined}},groupId:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||undefined}},invitedBy:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||undefined}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","attribute-helpers"]});
YUI.add("flickr-groups-invite-photo-accept-updater",function(e){"use strict";function t(t,n){var r={};return r.user_id=t.userID,r.photo_id=t.photoID,r.group_id=t.groupID,e.batch(n.callAPI("flickr.groups.invite.photo.accept",r),n.getModel("groups-pool-models",t.groupID),n.getModelRegistry("photo-group-invitation-models"),n.getModelRegistry("photo-group-invitations-models"),n.getModel("photo-models",t.photoID),n.getModelRegistry("photo-groups-models"),n.getModelRegistry("photo-contexts-models")).then(function(e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],u=e[5],a=e[6],f;if(n.stat==="ok")return r.addPhoto(o),r.setValue("poolCount",r.getValue("poolCount")+1),u.exists(t.photoID)&&!u.getValue(t.photoID,"groups").getFromListByID(r.getValue("id"))&&(u.getValue(t.photoID,"groups").prependToList(r),u.setValue(t.photoID,"total",u.getValue(t.photoID,"total")+1)),a.exists(t.photoID)&&!a.getValue(t.photoID,"contexts").getFromListByID(r.getValue("id"))&&(a.setValue(t.photoID,"totalGroups",a.getValue(t.photoID,"totalGroups")+1),a.getValue(t.photoID,"contexts").appendToList(r)),f=[t.photoID,t.groupID].join("-"),s.exists(t.photoID)&&s.getValue(t.photoID,"invitations").getFromListByID(f)&&(s.setValue(t.photoID,"total",s.getValue(t.photoID,"total")-1),s.getValue(t.photoID,"groups").removeFromList(t.groupID),s.getValue(t.photoID,"invitations").removeFromList(f)),i.remove(f),r}).then(null,function(e){throw n[e.fatal?"error":"debug"]("[flickr-groups-invite-photo-accept-updater] failed getting or processing API response:",e),e})}e.namespace("ModelUpdaters")["flickr-groups-invite-photo-accept"]={run:t}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("flickr-groups-invite-photo-decline-updater",function(e){"use strict";function t(t,n){var r={};return r.user_id=t.userID,r.photo_id=t.photoID,r.group_id=t.groupID,e.batch(n.callAPI("flickr.groups.invite.photo.decline",r),n.getModel("groups-pool-models",t.groupID),n.getModelRegistry("photo-group-invitation-models"),n.getModelRegistry("photo-group-invitations-models")).then(function(e){var n=e[0],r=e[1],i=e[2],s=e[3],o;if(n.stat==="ok")return o=[t.photoID,t.groupID].join("-"),s.exists(t.photoID)&&s.getValue(t.photoID,"invitations").getFromListByID(o)&&(s.setValue(t.photoID,"total",s.getValue(t.photoID,"total")-1),s.getValue(t.photoID,"groups").removeFromList(t.groupID),s.getValue(t.photoID,"invitations").removeFromList(o)),i.remove(o),r}).then(null,function(e){throw n[e.fatal?"error":"debug"]("[flickr-groups-invite-photo-decline-updater] failed getting or processing API response:",e),e})}e.namespace("ModelUpdaters")["flickr-groups-invite-photo-decline"]={run:t}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("photo-group-invitations-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-photos-getGroupInvitations"].run(t,this.appContext)},acceptInvitation:function(t,n){return e.ModelUpdaters["flickr-groups-invite-photo-accept"].run(t,n)},declineInvitation:function(t,n){return e.ModelUpdaters["flickr-groups-invite-photo-decline"].run(t,n)}},attributes:{id:{},groups:{isListProxy:!0},invitations:{isListProxy:!0},total:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photos-getGroupInvitations-fetcher","flickr-groups-invite-photo-accept-updater","flickr-groups-invite-photo-decline-updater"]});
YUI.add("flickr-photos-getGroupInvitations-fetcher",function(e){"use strict";function t(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r.groups&&r.groups.group,a=n.id,f={},l=[],c=[];u&&e.Array.each(u,function(t,r){var i,u,a,f,h;i=[n.id,t.id].join("-"),u={id:i,photoId:n.id,groupId:t.id,invitedBy:t.invitedBy.nsid},a=s.exists(i)?s.proxy(i):s.add(u),f={id:t.id,title:t.name,isMember:t.member,isModerator:t.moderator,isAdmin:t.admin,memberCount:t.member_count,poolCount:t.photos,bestIconURL:e.APIHelper.response.parseGroupIconURLs(t.iconurls)},h=o.exists(t.id)?o.proxy(t.id):o.add(f),l.push(a),c.push(h)}),f={id:a,groups:c,invitations:l,total:l.length},i.exists(a)?i.setValues(a,f):i.add(f)}function n(t,n){var r=this;return e.batch(n.callAPI("flickr.photos.getGroupInvitations",{photo_id:t.id,extras:"icon_urls",hermes:"1"}),n.getModelRegistry("photo-group-invitations-models"),n.getModelRegistry("photo-group-invitation-models"),n.getModelRegistry("groups-pool-models")).then(function(e){r._processResponse(e,t)},function(e){throw n.error(e.message),n.error(e.stack),n[e.fatal?"error":"debug"]("[flickr-photos-getGroupInvitations-fetcher] failed getting or processing API response:",e),e})}e.namespace("ListFetchers")["flickr-photos-getGroupInvitations"]={run:n,_processResponse:t}},"@VERSION@",{requires:["flickr-promise"],optional:["photo-group-invitations-models","groups-pool-models","person-models","photo-group-invitation-models"]});
YUI.add("hermes-template-group-invitation-list-item",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n		<img src="',(i=n.bestIconURL)?i=i.call(e,{hash:{},data:t}):(i=e.bestIconURL,i=typeof i===u?i.apply(e):i),r+=a(i)+'" class="album-selection-list-item-icon" />\n	',r}function c(e,t){return'\n		<img src="https://s.yimg.com/pw/images/buddyicon11_s.png" class="album-selection-list-item-icon" />\n	'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<li class="album-selection-list-item ',(o=n["class"])?o=o.call(t,{hash:{},data:i}):(o=t["class"],o=typeof o===u?o.apply(t):o),s+=a(o)+'" data-album-id="',(o=n.id)?o=o.call(t,{hash:{},data:i}):(o=t.id,o=typeof o===u?o.apply(t):o),s+=a(o)+'" data-machine-title="',(o=n.machineTitle)?o=o.call(t,{hash:{},data:i}):(o=t.machineTitle,o=typeof o===u?o.apply(t):o),s+=a(o)+'">\n	<span class="album-selection-list-item-icon-topper">&nbsp;</span>\n	<div class="album-selection-list-item-icon-wrapper">\n	',o=n["if"].call(t,t.bestIconURL,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+='\n	</div>\n	<div class="album-selection-list-item-labels">\n		<span class="album-selection-list-item-title">\n			<a href="/groups/',(o=n.id)?o=o.call(t,{hash:{},data:i}):(o=t.id,o=typeof o===u?o.apply(t):o),s+=a(o)+'">\n				',(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===u?o.apply(t):o),s+=a(o)+'\n			</a>\n		</span>\n		<span class="group-invitation-actions">\n			<button class="ui-button group-invitation-decline"><span>Decline</span></button>\n			<button class="ui-button group-invitation-accept"><span>Accept</span></button>\n		</span>\n	</div>\n</li>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-invitation-list-item",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-group-invitation-dialog",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){return"\n		<ol class='album-selection-list loading'>\n			<li>Loading invitations</li>\n		</ol>\n	"}function c(e,t){var r="",i;r+="\n		<ol class='album-selection-list'>\n			",i=n["if"].call(e,e.albums,{hash:{},inverse:u.program(7,d,t),fn:u.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="\n		</ol>\n	",r}function h(e,t){var r="",i;r+="\n				",i=n.each.call(e,e.albums,{hash:{},inverse:u.noop,fn:u.program(5,p,t),data:t});if(i||i===0)r+=i;return r+="\n			",r}function p(e,t){var i="",s;i+="\n					",s=u.invokePartial(r["group-invitation-list-item"],"group-invitation-list-item",e,n,r,t);if(s||s===0)i+=s;return i+="\n				",i}function d(e,t){var r="",i;return r+="\n				<div class='none'>",(i=n.none)?i=i.call(e,{hash:{},data:t}):(i=e.none,i=typeof i===a?i.apply(e):i),r+=f(i)+"</div>\n			",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<div class="album-selection">\n	<h2 class="album-selection-heading">Pending invitations for this photo</h2>\n	<button class="ui-dialog-button ui-dialog-button-neutral ui-dialog-button-close hide-text"><span>&nbsp;</span></button>\n	',o=n["if"].call(t,t.loading,{hash:{},inverse:u.program(3,c,i),fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;return s+='\n	<div class="album-selection-buttons">\n		<button class="ui-dialog-button ui-dialog-button-neutral ui-dialog-button-done album-selection-done"><span>Done</span></button>\n	</div>\n</div>',s}),r={};e.Array.each(["group-invitation-list-item"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-invitation-dialog",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-group-invitation-list-item"]});
YUI.add("group-invitation-dialog-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){return this.set("photoID",e.photoID),this.setContainerHTML(this.templates("group-invitation-dialog")({loading:!0})),this},loadState:function(){var e=this;return this.appContext.getModel("photo-group-invitations-models",this.get("photoID")).then(function(t){e.set("groupInvitationsModel",t),e.set("groupInvitationsModelRegistry",t.registry)}).then(null,function(t){throw e.onError({message:"There was a problem loading this photo's group invitations.",err:t,rejuvinate:!1}),t})},buildContainer:function(){var e=this.get("groupInvitationsModel").getValue("groups").toJSON(),t;return t=this.templates("group-invitation-dialog")({loading:!1,albums:e,none:"No pending group invitations"}),this.setContainerHTML(t),this},activate:function(){var t=this.get("container");this.registerEventHandler(t.all(".ui-dialog-button-done, .ui-dialog-button-close").on("click",function(t){e.Views.dialog.close()})),this.registerEventHandler(t.all(".group-invitation-accept").on("click",this.handleAcceptInvitation,this)),this.registerEventHandler(t.all(".group-invitation-decline").on("click",this.handleDeclineInvitation,this))},handleAcceptInvitation:function(e){var t=this.get("groupInvitationsModelRegistry"),n=e.target.ancestor(".album-selection-list-item"),r=n.getAttribute("data-album-id"),i=this;return t.remote.acceptInvitation({userID:this.appContext.getViewer().nsid,photoID:this.get("photoID"),groupID:r},this.appContext).then(function(){i.get("groupInvitationsModel").getValue("groups").removeFromList(r),i.appContext.getModel("groups-pool-models",r).then(function(e){i.appContext.getModel("photo-contexts-models",i.get("photoID")).then(function(t){t.getValue("contexts").appendToList(e)})}),i.fadeOutGroup(n)})},handleDeclineInvitation:function(e){var t=this.get("groupInvitationsModelRegistry"),n=e.target.ancestor(".album-selection-list-item"),r=n.getAttribute("data-album-id"),i=this;return t.remote.declineInvitation({userID:this.appContext.getViewer().nsid,photoID:this.get("photoID"),groupID:r},this.appContext).then(function(){i.get("groupInvitationsModel").getValue("groups").removeFromList(r),i.fadeOutGroup(n)})},fadeOutGroup:function(e){var t=this;e.transition({easing:"ease-out",duration:.5,opacity:"0"},function(){e.remove(),t.get("groupInvitationsModel").getValue("groups").toJSON().length===0&&(t.buildContainer(),t.activate())})},onError:function(t){var n=this.get("container"),r,i=typeof t.rejuvinate=="undefined"?!0:t.rejuvinate,s,o,u=this,a,f="Error";t.err.code===6&&(f=""),o=new e.Views["confirmation-dialog-view"]({title:"Error",icon:"ui-icon-modal-error",heading:f,content:t.message,cancelButtonLabel:"",showCancelButton:!1,appContext:this.appContext}),o.render(),o.activate(),a=o.get("container"),this.fire("viewEvent","getDialogOffset",function(t){s=e.Views.dialog.getNewInstance("dialog-modal",{content:o.get("container"),appContext:u.appContext,offsetLeft:t}),s.show(),o.registerEventHandler(a.all(".ui-dialog-button-confirm, .ui-dialog-button-close").on("click",function(){s.hide(),i&&u.fire("viewEvent","getDialogOffset",function(t){r=e.Views.dialog.getNewInstance("dialog-modal",{content:n,appContext:u.appContext,offsetLeft:t}),r.show()})},u))}),this.appContext.error(t.err.message,t.err.stack)}})},"@VERSION@",{requires:["flickr-view","album-selection-css","group-invitation-dialog-css","hermes-template-group-invitation-dialog","hermes-template-group-invitation-list-item"]});
YUI.add("group-invitation-notification-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){return this.set("photoID",e.photoId),this.set("userID",e.nsid),this.setContainerHTML(""),this},loadState:function(){var t=this;return e.batch(this.appContext.getModel("person-relationship-models",this.get("userID")),this.appContext.getModel("photo-group-invitations-models",{id:this.get("photoID"),personId:this.get("userID")})).then(function(e){t.set("ownerRelationshipModel",e[0]),t.set("groupInvitationsModel",e[1])})},buildContainer:function(){if(this.get("ownerRelationshipModel").getValue("isMe")){var e=this.get("groupInvitationsModel").getValue("groups").toJSON();this.setContainerHTML(this.templates("group-invitation-notification")({isInvitations:e.length>0,invitationCountString:e.length===1?"1 pending invitation":e.length+" pending invitations"}))}return this},activate:function(){var e=this.get("container").one("a"),t=this;e&&this.registerEventHandler(e.on("click",this.handleGroupInvitationClick,this)),this.registerEventHandler(this.get("groupInvitationsModel").on("valuesChanged",function(e){t.buildContainer(),t.activate()}))},handleGroupInvitationClick:function(t){t.preventDefault();var n,r,i=this;n=new e.Views["group-invitation-dialog-view"]({photoID:this.get("photoID"),appContext:this.appContext}),n.loadState().then(function(){n.buildContainer(),r=n.get("container"),r.addClass("album-selection-dialog-view"),r.addClass("group-selection-dialog-view"),i.fire("viewEvent","getDialogOffset",function(t){i.groupInvitationDialog=e.Views.dialog.getNewInstance("dialog-modal",{content:n.get("container"),appContext:i.appContext,offsetLeft:t}),i.groupInvitationDialog.show(),n._params.keyEventScope=i.groupInvitationDialog.getKeyEventScope(),n.activate()})},function(e){console.log("ERROR",e.message)}).then(null,function(e){console.log("ERROR",e.message)}),e.rapidTracker.beacon(this.name,"groupInvitationsClick")}})},"@VERSION@",{requires:["flickr-view","group-invitation-notification-css","hermes-template-group-invitation-notification","photo-group-invitations-models","group-invitation-dialog-view"]});
YUI.add("photo-sidebar-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:["photo-sidebar"],initializer:function(e){return this.nsid=e.nsid,this.photoId=e.photoId,this.closeUrl=e.closeUrl,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"photo-title-desc-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"attribution-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,additionalViewClasses:["clear-float"]},"photo-stats-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"photo-license-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"photo-sidebar-actions-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"group-invitation-notification-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("pending-invitation-notification")}},"comments-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"photo-charms-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"context-slider-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1}},loadState:function(){return e.AutoResolvingPromise()},buildContainer:function(){var e;return e=this.templates("photo-sidebar")({"close-url":this.closeUrl,"attribution-view":this.subviews["attribution-view"].get("container"),"photo-title-desc-view":this.subviews["photo-title-desc-view"].get("container"),"photo-stats-view":this.subviews["photo-stats-view"].get("container"),"photo-license-view":this.subviews["photo-license-view"].get("container"),"actions-view":this.subviews["photo-sidebar-actions-view"].get("container"),"group-invitation-notification-view":this.appContext.flipper.isFlipped("pending-invitation-notification")?this.subviews["group-invitation-notification-view"].get("container"):"","comments-view":this.subviews["comments-view"].get("container"),"photo-charms-view":this.subviews["photo-charms-view"].get("container"),"context-slider-view":this.subviews["context-slider-view"].get("container")}),this.setContainerHTML(e),this},buildErrorContainer:function(){this.setContainerHTML(this.templates("photo-sidebar")({loadingError:!0}))},activate:function(){var e,t,n=this.get("container"),r,i;return n&&(r=n.one(".newCloseBtn"),i=n.one(".scrollingNewCloseBtn"),r&&i&&this.on("subviewViewEvent",function(n){if(n&&n.details&&n.details.length>1&&n.details[0]==="animateCloseBtn")return e=n.details[1].scrollTop,t=n.details[1].scrollbarSize,e>15?(r.addClass("scrolling"),r.removeClass("not-scrolling"),i.addClass("scrolling"),r.setStyle("right",t),i.setStyle("right",t+3)):e<=15&&(r.removeClass("scrolling"),r.addClass("not-scrolling"),i.removeClass("scrolling"),r.setStyle("right",t+10),i.setStyle("right",t+13)),!1})),this}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-sidebar","photo-sidebar-css","url-helper"],optional:["attribution-view","photo-title-desc-view","photo-stats-view","photo-license-view","photo-sidebar-actions-view","comments-view","photo-charms-view","group-invitation-notification-view","photo-models","person-models"],langBundles:["photo-sidebar"]});
YUI.add("hermes-lang-photo-sidebar",function(e,t){e.Intl.add("hermes/photo-sidebar","en-US",{ERROR_LOADING_SIDEBAR:["Error loading photo sidebar"],RETRY:["Retry"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-head-meta",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function d(e,t){var n="";return n+='description="'+l(typeof e===f?e.apply(e):e)+'"',n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this,p=n.blockHelperMissing;s+='<meta name="',(o=n.metaName)?o=o.call(t,{hash:{},data:i}):(o=t.metaName,o=typeof o===f?o.apply(t):o),s+=l(o)+'" content="',a={hash:{},data:i},s+=l((o=n.renderMetaInfo||t.renderMetaInfo,o?o.call(t,t.metaValue,a):c.call(t,"renderMetaInfo",t.metaValue,a)))+'" ',a={hash:{},inverse:h.noop,fn:h.program(1,d,i),data:i},(u=n.metaDescription)?u=u.call(t,a):(u=t.metaDescription,u=typeof u===f?u.apply(t):u),n.metaDescription||(u=p.call(t,u,a));if(u||u===0)s+=u;return s+=' data-dynamic="true">\n',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/head-meta",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-head-link",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='id="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===a?i.apply(e):i),r+=f(i)+'"',r}function p(e,t){var r="",i;return r+='rev="',(i=n.rev)?i=i.call(e,{hash:{},data:t}):(i=e.rev,i=typeof i===a?i.apply(e):i),r+=f(i)+'"',r}function d(e,t){var r="",i;return r+='rel="',(i=n.rel)?i=i.call(e,{hash:{},data:t}):(i=e.rel,i=typeof i===a?i.apply(e):i),r+=f(i)+'"',r}function v(e,t){var r="",i;return r+='type="',(i=n.type)?i=i.call(e,{hash:{},data:t}):(i=e.type,i=typeof i===a?i.apply(e):i),r+=f(i)+'"',r}function m(e,t){var r="",i;return r+='href="',(i=n.href)?i=i.call(e,{hash:{},data:t}):(i=e.href,i=typeof i===a?i.apply(e):i),r+=f(i)+'"',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.helperMissing;s+="<link ",o=n["if"].call(t,t.id,{hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.rev,{hash:{},inverse:l.noop,fn:l.program(3,p,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.rel,{hash:{},inverse:l.noop,fn:l.program(5,d,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.type,{hash:{},inverse:l.noop,fn:l.program(7,v,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.href,{hash:{},inverse:l.noop,fn:l.program(9,m,i),data:i});if(o||o===0)s+=o;return s+=' data-dynamic="true" data-dynamic-added-by="',u={hash:{},data:i},s+=f((o=n.obfuscateInternals||t.obfuscateInternals,o?o.call(t,t.addedBy,u):c.call(t,"obfuscateInternals",t.addedBy,u)))+'">',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/head-link",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-global-nav",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return" has-filter-bar"}function d(e,t){var r="",i,s;return r+='\n			<li role="menuitem" class="gn-signup">\n				<a data-track="gnSignupClick" class="gn-title" href="/signup">',s={hash:{intlName:"common.SIGN_UP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n			</li>\n		",r}function v(e,t){var r="",i,s,o;r+='\n			<li role="menuitem" data-context="you">\n				<a data-track="gnYouMainClick" class="gn-title you" href="'+l((i=(i=e.viewer,i==null||i===!1?i:i.url),typeof i===c?i.apply(e):i))+'" aria-haspopup="true">',o={hash:{intlName:"common.YOU"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a data-track="gnYouPhotostreamClick" href="'+l((i=(i=e.viewer,i==null||i===!1?i:i.url),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.PHOTOSTREAM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouSetsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.albums),typeof i===c?i.apply(e):i))+'">',s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.set_not_album),{hash:{},inverse:h.program(8,g,t),fn:h.program(6,m,t),data:t});if(s||s===0)r+=s;r+='</a></li>\n					<li class="menuitem"><a data-track="gnYouMapClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.map),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.MAP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouFavoritesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.favorites),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.FAVORITES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouGalleriesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.galleries),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouRecentActivityClick" href="/activity">',o={hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.stats),{hash:{},inverse:h.noop,fn:h.program(10,y,t),data:t});if(s||s===0)r+=s;r+='\n					<li class="menuitem"><a data-track="gnYouOrganizeClick" href="/photos/organize">',o={hash:{intlName:"global-nav.ORGANIZE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					",o={hash:{},inverse:h.noop,fn:h.program(12,b,t),data:t},s=(i=n.isFlipped||e.isFlipped,i?i.call(e,e.flippers,"ten-dollar-books",o):f.call(e,"isFlipped",e.flippers,"ten-dollar-books",o));if(s||s===0)r+=s;r+="\n					",o={hash:{},inverse:h.noop,fn:h.program(14,w,t),data:t},s=(i=n.isNotFlipped||e.isNotFlipped,i?i.call(e,e.flippers,"ten-dollar-books",o):f.call(e,"isNotFlipped",e.flippers,"ten-dollar-books",o));if(s||s===0)r+=s;return r+="\n				</ul>\n			</li>\n		",r}function m(e,t){var r,i;return i={hash:{intlName:"common.SETS"},data:t},l((r=n.intlMessage||e.intlMessage,r?r.call(e,i):f.call(e,"intlMessage",i)))}function g(e,t){var r,i;return i={hash:{intlName:"common.ALBUMS"},data:t},l((r=n.intlMessage||e.intlMessage,r?r.call(e,i):f.call(e,"intlMessage",i)))}function y(e,t){var r="",i,s;return r+='<li class="menuitem"><a data-track="gnYouStatsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.stats),typeof i===c?i.apply(e):i))+'">',s={hash:{intlName:"global-nav.STATS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>",r}function b(e,t){var n="",r;return n+='<li class="menuitem"><a data-track="gnYouCreationsClick" href="'+l((r=(r=(r=e.viewer,r==null||r===!1?r:r.urls),r==null||r===!1?r:r.creations),typeof r===c?r.apply(e):r))+'">Photo Books</a></li>',n}function w(e,t){var r="",i,s;return r+='<li class="menuitem"><a data-track="gnYouCreationsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.creations),typeof i===c?i.apply(e):i))+'">',s={hash:{intlName:"global-nav.CREATIONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>",r}function E(e,t){var r="",i,s;return r+='\n			<li class="toplink">\n				<a data-track="gnYouMainClick" class="gn-link" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.photostream),typeof i===c?i.apply(e):i))+'"><span>',s={hash:{intlName:"global-nav.YOUR_PHOTOSTREAM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</span></a>\n			</li>\n		",r}function S(e,t){var r="",i,s;return r+='\n			<li role="menuitem" data-context="contacts">\n				<a data-track="gnContactsMainClick" class="gn-title contacts" href="/photos/friends" aria-haspopup="true">',s={hash:{intlName:"filter-bar.PEOPLE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a data-track="gnContactsRecentPhotosClick" href="/photos/friends">',s={hash:{intlName:"global-nav.PHOTOS_FROM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsPhotosOfContactsClick" href="/photosof/contacts">',s={hash:{intlName:"global-nav.PHOTOS_OF"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsContactListClick" href="'+
l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.list),typeof i===c?i.apply(e):i))+'">',s={hash:{intlName:"global-nav.LIST"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsAddContactsClick" href="/import/people">',s={hash:{intlName:"global-nav.FIND_FRIENDS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>\n				</ul>\n			</li>\n		",r}function x(e,t){var r="",i,s;return r+='\n			<li role="menuitem" data-context="groups">\n				<a data-track="gnGroupsMainClick" class="gn-title groups" href="/groups" aria-haspopup="true">',s={hash:{intlName:"global-nav.GROUPS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a data-track="gnGroupsGroupsListClick" href="/groups">',s={hash:{intlName:"global-nav.GROUPS_LIST"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnGroupsRecentDiscussionsClick" href="/recent.gne">',s={hash:{intlName:"global-nav.RECENT_DISCUSSIONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnGroupsSearchGroupsClick" href="/search/groups">',s={hash:{intlName:"global-nav.SEARCH_GROUPS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnGroupsCreateAGroupClick" href="/groups_create.gne">',s={hash:{intlName:"global-nav.CREATE_A_GROUP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>\n				</ul>\n			</li>\n		",r}function T(e,t){var r="",i,s,o;r+='\n			<li role="menuitem" data-context="explore">\n				<a data-track="gnExploreMainClick" class="gn-title explore" href="/explore" aria-haspopup="true">',o={hash:{intlName:"common.EXPLORE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li role="menuitem"><a data-track="gnExploreRecentPhotosClick" href="/explore">',o={hash:{intlName:"global-nav.RECENT_PHOTOS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreTheCommonsClick" href="/commons">',o={hash:{intlName:"global-nav.THE_COMMONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreGettyCollectionClick" href="/gettyimages">',o={hash:{intlName:"global-nav.GETTY_COLLECTION"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreGalleriesClick" href="/galleries">',o={hash:{intlName:"global-nav.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreWorldMapClick" href="/map">',o={hash:{intlName:"global-nav.WORLD_MAP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreAppGardenClick" href="/services">',o={hash:{intlName:"global-nav.APP_GARDEN"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreCameraFinderClick" href="/cameras">',o={hash:{intlName:"global-nav.CAMERA_FINDER"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.weekly_flickr),{hash:{},inverse:h.noop,fn:h.program(23,N,t),data:t});if(s||s===0)r+=s;return r+='\n					<li role="menuitem"><a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">',o={hash:{intlName:"global-nav.FLICKR_BLOG"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n				</ul>\n			</li>\n		",r}function N(e,t){var r="",i,s;return r+='<li role="menuitem"><a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/sets/72157639868074114/">',s={hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>",r}function C(e,t){var r="",i,s;return r+='\n			<li role="menuitem" class="gn-upload">\n				<a data-track="gnUploadMain" class="gn-title" href="/upload">',s={hash:{intlName:"global-nav.UPLOAD"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n			</li>\n		",r}function k(e,t){var r="",i;r+="\n			",i=n["if"].call(e,e.showAutosuggest,{hash:{},inverse:h.program(30,A,t),fn:h.program(28,L,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function L(e,t){var r="",i,s;return r+='\n				<li role="menuitem">\n					',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["autosuggest-view"],s):f.call(e,"outlet",e["autosuggest-view"],s)))+"\n				</li>\n			",r}function A(e,t){var r="",i;r+="\n				",i=n["if"].call(e,e.showSmartSearchBar,{hash:{},inverse:h.program(33,M,t),fn:h.program(31,O,t),data:t});if(i||i===0)r+=i;return r+="\n			",r}function O(e,t){var r="",i,s;return r+='\n					<li role="menuitem">\n						',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["search-bar-view"],s):f.call(e,"outlet",e["search-bar-view"],s)))+"\n					</li>\n				",r}function M(e,t){var r="",i,s;return r+='\n					<li role="menuitem">\n						<form action="/search/" method="get" role="search">\n							<input type="text" name="q" value="" id="gn-search-field" autocomplete="off" aria-label="Search" role="textbox">\n							<input type="submit" data-track="gnSearchSearchIcon" class="search-icon" tabindex="-1" aria-label="',s={hash:{
intlName:"global-nav.SEARCH"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'" role="button">\n						</form>\n					</li>\n				',r}function _(e,t){var r="",i,s;return r+='\n			<li role="menuitem">\n				',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["account-menu-view"],s):f.call(e,"outlet",e["account-menu-view"],s)))+"\n			</li>\n		",r}function D(e,t){var r="",i,s;return r+='\n			<li role="menuitem" class="gn-upload">\n				<a data-track="gnSignin" class="gn-title" href="/signin">',s={hash:{intlName:"global-nav.SIGN_IN"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n			</li>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<div class="global-nav-shim',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.show_filter_bar),{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"></div>\n<div class="global-nav-content">\n	<a href="/" class="main-logo" data-track="gnLogoClick" title="',a={hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):f.call(t,"intlMessage",a)))+'"></a>\n\n	<ul class="nav-menu" role="menubar">\n		',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signup_link),{hash:{},inverse:h.noop,fn:h.program(3,d,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_menu),{hash:{},inverse:h.noop,fn:h.program(5,v,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_link),{hash:{},inverse:h.noop,fn:h.program(16,E,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.contacts_menu),{hash:{},inverse:h.noop,fn:h.program(18,S,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.groups_menu),{hash:{},inverse:h.noop,fn:h.program(20,x,i),data:i});if(u||u===0)s+=u;s+="\n		\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.explore_menu),{hash:{},inverse:h.noop,fn:h.program(22,T,i),data:i});if(u||u===0)s+=u;s+="\n		\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.upload_link),{hash:{},inverse:h.noop,fn:h.program(25,C,i),data:i});if(u||u===0)s+=u;s+='\n	</ul>\n\n	<ul class="gn-tools">\n		',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.search_bar),{hash:{},inverse:h.noop,fn:h.program(27,k,i),data:i});if(u||u===0)s+=u;s+="\n\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.account_menu),{hash:{},inverse:h.noop,fn:h.program(35,_,i),data:i});if(u||u===0)s+=u;s+="\n		\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signin_link),{hash:{},inverse:h.noop,fn:h.program(37,D,i),data:i});if(u||u===0)s+=u;return s+="\n	</ul>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/global-nav",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
/*
YUI 3.16.0-rc-1 (build c2054c6)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("text-data-accentfold",function(e,t){e.namespace("Text.Data").AccentFold={0:/[\u2070\u2080\u24EA\uFF10]/gi,1:/[\u00B9\u2081\u2460\uFF11]/gi,2:/[\u00B2\u2082\u2461\uFF12]/gi,3:/[\u00B3\u2083\u2462\uFF13]/gi,4:/[\u2074\u2084\u2463\uFF14]/gi,5:/[\u2075\u2085\u2464\uFF15]/gi,6:/[\u2076\u2086\u2465\uFF16]/gi,7:/[\u2077\u2087\u2466\uFF17]/gi,8:/[\u2078\u2088\u2467\uFF18]/gi,9:/[\u2079\u2089\u2468\uFF19]/gi,a:/[\u00AA\u00E0-\u00E5\u0101\u0103\u0105\u01CE\u01DF\u01E1\u01FB\u0201\u0203\u0227\u1D43\u1E01\u1E9A\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u24D0\uFF41]/gi,b:/[\u1D47\u1E03\u1E05\u1E07\u24D1\uFF42]/gi,c:/[\u00E7\u0107\u0109\u010B\u010D\u1D9C\u1E09\u24D2\uFF43]/gi,d:/[\u010F\u1D48\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u217E\u24D3\uFF44]/gi,e:/[\u00E8-\u00EB\u0113\u0115\u0117\u0119\u011B\u0205\u0207\u0229\u1D49\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u2091\u212F\u24D4\uFF45]/gi,f:/[\u1DA0\u1E1F\u24D5\uFF46]/gi,g:/[\u011D\u011F\u0121\u0123\u01E7\u01F5\u1D4D\u1E21\u210A\u24D6\uFF47]/gi,h:/[\u0125\u021F\u02B0\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E96\u210E\u24D7\uFF48]/gi,i:/[\u00EC-\u00EF\u0129\u012B\u012D\u012F\u0133\u01D0\u0209\u020B\u1D62\u1E2D\u1E2F\u1EC9\u1ECB\u2071\u2139\u2170\u24D8\uFF49]/gi,j:/[\u0135\u01F0\u02B2\u24D9\u2C7C\uFF4A]/gi,k:/[\u0137\u01E9\u1D4F\u1E31\u1E33\u1E35\u24DA\uFF4B]/gi,l:/[\u013A\u013C\u013E\u0140\u01C9\u02E1\u1E37\u1E39\u1E3B\u1E3D\u2113\u217C\u24DB\uFF4C]/gi,m:/[\u1D50\u1E3F\u1E41\u1E43\u217F\u24DC\uFF4D]/gi,n:/[\u00F1\u0144\u0146\u0148\u01F9\u1E45\u1E47\u1E49\u1E4B\u207F\u24DD\uFF4E]/gi,o:/[\u00BA\u00F2-\u00F6\u014D\u014F\u0151\u01A1\u01D2\u01EB\u01ED\u020D\u020F\u022B\u022D\u022F\u0231\u1D52\u1E4D\u1E4F\u1E51\u1E53\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u2092\u2134\u24DE\uFF4F]/gi,p:/[\u1D56\u1E55\u1E57\u24DF\uFF50]/gi,q:/[\u02A0\u24E0\uFF51]/gi,r:/[\u0155\u0157\u0159\u0211\u0213\u02B3\u1D63\u1E59\u1E5B\u1E5D\u1E5F\u24E1\uFF52]/gi,s:/[\u015B\u015D\u015F\u0161\u017F\u0219\u02E2\u1E61\u1E63\u1E65\u1E67\u1E69\u1E9B\u24E2\uFF53]/gi,t:/[\u0163\u0165\u021B\u1D57\u1E6B\u1E6D\u1E6F\u1E71\u1E97\u24E3\uFF54]/gi,u:/[\u00F9-\u00FC\u0169\u016B\u016D\u016F\u0171\u0173\u01B0\u01D4\u01D6\u01D8\u01DA\u01DC\u0215\u0217\u1D58\u1D64\u1E73\u1E75\u1E77\u1E79\u1E7B\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u24E4\uFF55]/gi,v:/[\u1D5B\u1D65\u1E7D\u1E7F\u2174\u24E5\uFF56]/gi,w:/[\u0175\u02B7\u1E81\u1E83\u1E85\u1E87\u1E89\u1E98\u24E6\uFF57]/gi,x:/[\u02E3\u1E8B\u1E8D\u2093\u2179\u24E7\uFF58]/gi,y:/[\u00FD\u00FF\u0177\u0233\u02B8\u1E8F\u1E99\u1EF3\u1EF5\u1EF7\u1EF9\u24E8\uFF59]/gi,z:/[\u017A\u017C\u017E\u1DBB\u1E91\u1E93\u1E95\u24E9\uFF5A]/gi}},"3.16.0-rc-1",{requires:["yui-base"]});
/*
YUI 3.16.0-rc-1 (build c2054c6)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("text-accentfold",function(e,t){var n=e.Array,r=e.Text,i=r.Data.AccentFold,s={canFold:function(e){var t;for(t in i)if(i.hasOwnProperty(t)&&e.search(i[t])!==-1)return!0;return!1},compare:function(e,t,n){var r=s.fold(e),i=s.fold(t);return n?!!n(r,i):r===i},filter:function(e,t){return n.filter(e,function(e){return t(s.fold(e))})},fold:function(t){return e.Lang.isArray(t)?n.map(t,s.fold):(t=t.toLowerCase(),e.Object.each(i,function(e,n){t=t.replace(e,n)}),t)}};r.AccentFold=s},"3.16.0-rc-1",{requires:["array-extras","text-data-accentfold"]});
YUI.add("flickr-autosuggest-getContextResults-fetcher",function(e){"use strict";function t(t){var n=t.id.split("_"),r={extras:e.APIHelper.request.getRebootPhotoExtras(),context_id:n[0],context_type:n[1]};return r}function n(e,t){var n=e[0],r=e[1],i={id:t.id,contextId:t.context_id,contextType:t.context_type,tags:n.results.tags||[],people:n.results.people||[],groups:n.results.groups||[]};if(!n.results)throw new Error("No `results` property returned by API.");return r.add(i)}function r(t,n){var r=this,i="flickr.autosuggest.getContextResults",s=this._processParams(t);return e.batch(n.callAPI(i,s),n.getModelRegistry("autosuggest-context-results-models")).then(function(n){return r._processResponse(n,e.merge(s,t))},function(e){throw n[e.fatal?"error":"debug"]("[flickr-autosuggest-getContextResults-fetcher] failed getting or processing API response:",e),e})}e.namespace("ModelFetchers")["flickr-autosuggest-getContextResults-fetcher"]={run:r,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["autosuggest-context-results-models"]});
